<div class="compose-container">
  <div class="compose-header">
    <h2>New Encrypted Message</h2>
    <a routerLink="/inbox" class="btn-cancel">Cancel</a>
  </div>

  <form (submit)="send(); $event.preventDefault()" class="compose-form">
    <div class="form-group">
      <label>Recipient Vault Address</label>
      <input
        type="email"
        [ngModel]="recipient()"
        (ngModelChange)="recipient.set($event)"
        name="recipient"
        placeholder="user@weaponmail.io"
        required />
    </div>

    <div class="form-group">
      <label>Subject <span class="meta-note">(cleartext metadata)</span></label>
      <input
        type="text"
        [ngModel]="subject()"
        (ngModelChange)="subject.set($event)"
        name="subject"
        placeholder="Brief reference..."
        required />
    </div>

    <div class="form-group">
      <label>Message <span class="meta-note">(E2E encrypted â€” server cannot read)</span></label>
      <textarea
        [ngModel]="body()"
        (ngModelChange)="body.set($event)"
        name="body"
        rows="10"
        placeholder="Type your secure message here..."
        required></textarea>
    </div>

    <div class="sealed-toggle">
      <label class="toggle-label">
        <input type="checkbox" [checked]="sealed()" (change)="sealed.set(!sealed())" />
        <span class="toggle-text">
          <strong>ðŸ”’ Sealed Message</strong>
          <span class="toggle-hint">
            Sealed messages are excluded from search and sender lookups.
            Only accessible by direct ID. Maximum privacy.
          </span>
        </span>
      </label>
    </div>

    <div class="actions">
      <button type="submit" [disabled]="sending() || !recipient() || !body()">
        {{ sending() ? 'Encrypting & Sending...' : (sealed() ? 'ðŸ”’ Send Sealed' : 'Send to Vault') }}
      </button>
    </div>
  </form>
</div>